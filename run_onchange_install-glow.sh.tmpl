#!/usr/bin/env bash

# -u: Treat unset variables as an error when substituting.
# -e: Exit immediately if a command exits with a non-zero status.
# -o pipefail: the return value of a pipeline is the status of the
#              last command to exit with a non-zero status.
set -eo pipefail

VERSION="2.1.1"

{{ if eq .chezmoi.osRelease.id "ubuntu" -}}
wget --quiet \
    "https://github.com/charmbracelet/glow/releases/download/v${VERSION}/glow_${VERSION}_amd64.deb" \
    -O /tmp/glow.deb
sudo dpkg -i /tmp/glow.deb
{{ else if eq .chezmoi.osRelease.id "fedora" -}}
wget --quiet \
    "https://github.com/charmbracelet/glow/releases/download/v${VERSION}/glow-${VERSION}.x86_64.rpm" \
    -O /tmp/glow.rpm
sudo yum install -y /tmp/glow.rpm
{{ end -}}