{{ if and (.hasGUI) (eq .chezmoi.os "linux") -}}
#!/usr/bin/env bash

# -u: Treat unset variables as an error when substituting.
# -e: Exit immediately if a command exits with a non-zero status.
# -o pipefail: the return value of a pipeline is the status of the
#              last command to exit with a non-zero status.
set -eo pipefail
{{ range .dconf.general }}
echo "dconf write {{ . }}"
dconf write {{ . }}
{{- end }}

{{- if eq .chezmoi.osRelease.id "fedora" }}
{{- range .dconf.fedora }}
echo "dconf write {{ . }}"
dconf write {{ . }}
{{- end }}
{{- end }}

{{- if eq .chezmoi.osRelease.id "ubuntu" }}
{{- range .dconf.ubuntu }}
echo "dconf write {{ . }}"
dconf write {{ . }}
{{- end }}
{{- end }}
{{ end -}}
